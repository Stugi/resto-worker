// ============================================
// РЕСТОРАНЫ И СТАТИСТИКА
// ============================================

model Restaurant {
  id             String       @id
  name           String
  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  settingsComment String? @db.Text

  users         User[]
  stats         RestaurantStat[]
  prompts       ReportPrompt[]
  voiceMessages VoiceMessage[]
  transcripts   Transcript[]
  reports       Report[]

  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  @@index([organizationId])
}

model RestaurantStat {
  id           String     @id
  restaurantId String
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id], onDelete: Cascade)

  date       DateTime @default(now())
  metricName String
  value      Float

  createdAt DateTime  @default(now())
  deletedAt DateTime?

  @@index([restaurantId, date])
}
