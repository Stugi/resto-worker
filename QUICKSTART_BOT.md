# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç Telegram –±–æ—Ç–∞

## –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
```bash
yarn dev
```

### 2. –û—Ç–∫—Ä–æ–π –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –∑–∞–ø—É—Å—Ç–∏ ngrok
```bash
ngrok http 3000
```

–°–∫–æ–ø–∏—Ä—É–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://a1b2-185-123-45-67.ngrok-free.app`)

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏ webhook
```bash
yarn bot:set-webhook https://YOUR_NGROK_URL/api/bot/webhook
```

–ó–∞–º–µ–Ω–∏ `YOUR_NGROK_URL` –Ω–∞ URL –∏–∑ ngrok.

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –±–æ—Ç–∞
1. –ù–∞–π–¥–∏ –±–æ—Ç–∞ –≤ Telegram (–∏–º—è –±–æ—Ç–∞ –≤–∏–¥–Ω–æ –≤ @BotFather)
2. –ù–∞–ø–∏—à–∏ `/start`
3. –ü—Ä–æ–π–¥–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:
   - –í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –í—ã–±–µ—Ä–∏ –º–∞—Å—à—Ç–∞–±
   - –ü–æ–¥–µ–ª–∏—Å—å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º
   - –í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
   - –ü–æ–ª—É—á–∏ –º–∞–≥–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞

---

## –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (Vercel)

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

```bash
yarn bot:set-webhook https://resto-worker.vercel.app/api/bot/webhook
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£–¥–∞–ª–∏—Ç—å webhook (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ ngrok)
yarn bot:delete-webhook

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π webhook
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
```

---

## –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ?

1. ‚úÖ **User** (—Ä–æ–ª—å: OWNER)
   - telegramId
   - phone
   - login (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
   - botState

2. ‚úÖ **Organization**
   - name
   - —Å–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

3. ‚úÖ **Billing**
   - status: TRIAL
   - trialStartsAt: —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞

4. ‚úÖ **Restaurant**
   - name
   - —Å–≤—è–∑—å —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç **–º–∞–≥–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ –≤ Telegram, –≥–¥–µ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –æ—Ç—á–µ—Ç—ã –æ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤.

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [`docs/TELEGRAM_BOT.md`](docs/TELEGRAM_BOT.md)
